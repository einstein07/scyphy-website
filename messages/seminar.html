<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Seminar Details</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="seminar-detail">Loading…</div>
  <a href="index.html">← Back to all seminars</a>

  <script>
    async function loadSeminar() {
      const params = new URLSearchParams(window.location.search);
      const id = params.get("id");

      const res = await fetch("../seminars.json");
      const seminars = await res.json();
      const seminar = seminars.find(s => s.id === id);

      const container = document.getElementById("seminar-detail");
      if (!seminar) {
        container.textContent = "Seminar not found.";
        return;
      }

       // Helper: decide if a field is “missing”
    const isMissing = (v) => {
      if (v == null) return true;
      const s = String(v).trim();
      if (!s) return true;
      if(s === "images/placeholder_chatgpt.png") return true
      const up = s.toUpperCase();
      return up === "TBD" || up === "TBA";
    };

    // Build the missing-items list
    const missing = [];
    if (isMissing(seminar.title))   missing.push("Title");
    if (isMissing(seminar.image))   missing.push("Speaker photo");
    if (isMissing(seminar.abstract)) missing.push("Abstract");
    if (isMissing(seminar.bio))     missing.push("Bio");

    const missingListHTML = missing.length
      ? `<p>We’re still missing the following for the website:</p>
         <ul>${missing.map(item => `<li>${item}</li>`).join("")}</ul>
         <p>Could you please send these at your convenience?</p>`
      : `<p>We have all the required materials for the website. Thank you!</p>`;

      container.innerHTML = `
        <h2>${seminar.title} by ${seminar.speaker}</h2>
        <h4>Email and Message</h4>

        Hello all, </p> We are excited to continue our Short Cyber-Physical Seminars with an upcoming talk by ${seminar.speaker}
        on ${seminar.date} at ${seminar.time} in ${seminar.location}. </p> The talk is titled "${seminar.title}". </p>
        The abstract for the talk and the speaker’s bio can be found at the following link: https://www.giovannireina.com/scyphy/seminar.html?id=${seminar.id} </p>
        We look forward to seeing you at the seminar! </p>
        Full schedule and abstracts at https://www.giovannireina.com/scyphy/
        </p>Best Regards, </p> The ScyPhy Seminar Team </p>

        <h4>Reminder</h4>
        Hello ${seminar.speaker}, <br>
        <p>This is a friendly reminder about your upcoming seminar scheduled for <strong>${seminar.date}</strong> at <strong>${seminar.time}</strong>.</p>
        ${missingListHTML}
        <p>Best regards,<br>The ScyPhy Seminar Team</p>
      `;
    }
    loadSeminar();
  </script>
</body>
</html>
